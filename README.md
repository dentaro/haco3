# haco3
letro_game_engin for esp32 

「ハコさん」というキャラが大活躍する（はずの）esp32で動くレトロゲームエンジンを開発中です。

ビルドオプションの設定などが必要なため、インストールはplatformIOでしかできません。（Arduino不可）

基本はゲームエンジン開発者の方向けの、コードの共有用です。

プロジェクタ内のフォルダをコピーした「コード」だけをあげているので、platformIOプロジェクトを作って動くようにしてからコピペするなどesp32向けのセッティングは、
ご自身で調べてお願いします。

実体は、inajobさんのo-bako をlovyanGFXに移植し、DentaroUI（同梱のカスタム仕様）から操作できるようにしたものです。

ハード的には下のサイトで紹介されている、2432S028Rという、esp32マイコンボード＋タッチ液晶のボードにチューニングしてあります。

https://lang-ship.com/blog/work/esp32-2432s028r-1/

コード共有用のベータ版で、バグありありです。ご了承の上、遊んでみてください。
（少しずつ改善していきます）

lua言語(v5.3)が動いていて、以下のo-bakoの言語仕様で動いていますが、今後は、pico8ライクな言語仕様も模索予定です。ちなみに、uLispも使えるようにすると思います。

https://inajob.github.io/o-bako-simulator/index.html



ーーーーーーーーーーーーーーーーーーー＜使い方＞ーーーーーーーーーーーーーーーーーーー

platformIOのインストールができたら、

dataフォルダ内のinitの中身がゲームの本体になります。それぞれを編集してゲーム制作ができます。

　　・sprite.bmpは画像編集ソフトを使ってドット絵を描いて編集してください。

　　・main.luaはlua言語で開発ができます。o-bakoの言語仕様にそって編集してください。（pico8の仕様に向けて、しばらくは言語仕様がどんどん変わります）

　　・game.jsonは通常編集しません。
  
  ーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーー

（2022.8.25)

ボタン配置をPICO8に合わせて変えたのと、タイマー割り込みで、別コア描画にしました。

loop処理のコアは90~125FPSで動くので、30フレーム縛りをあまり気にしなくてすむと思います.

UIエリアに線が入るバグがありますが、いまのところ放置中です。

  ーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーー

ゲームエンジンではなく、luaでのゲームサンプルを作っていただける方は、luaを使ったWebブラウザでゲーム開発ができるhaco3simによる開発も楽しいかもしれません。

https://github.com/dentaro/haco3sim/

ゲームエンジン、ゲームサンプル両方から「ハコさん」を大活躍させていただける方は、ぜひ一緒に開発していただけませんか？
